{"ast":null,"code":"var _jsxFileName = \"/home/Charging/_final_test/Finans_PAMW/frontend/src/context/AppContext.js\",\n  _s2 = $RefreshSig$();\n// src/context/AppContext.js\nimport React, { createContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AppContext = /*#__PURE__*/createContext();\nexport const AppProvider = ({\n  children\n}) => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [transactions, setTransactions] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [budget, setBudget] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  // Charger les données au démarrage\n  _s(useEffect(_s(() => {\n    _s();\n    const token = localStorage.getItem(\"token\");\n\n    // Charger les transactions\n    useEffect(() => {\n      fetch(\"http://localhost:5000/transactions/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        }\n      }).then(res => res.json()).then(data => {\n        const sanitized = (data.transactions || []).map(t => ({\n          ...t,\n          categories: Array.isArray(t.categories) ? t.categories : []\n        }));\n        setTrans(sanitized);\n      }).catch(err => console.error(\"Erreur lors du chargement des transactions :\", err));\n    }, [token]);\n  }, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"), []), \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n  const fetchData = async () => {\n    try {\n      const transResa = await axios.get(\"http://127.0.0.1:5000/transactions\");\n      const catRes = await axios.get(\"http://127.0.0.1:5000/categories\");\n      const budgetRes = await axios.get(\"http://127.0.0.1:5000/budget\");\n      setTransactions(transRes.data);\n      setCategories(catRes.data);\n      setBudget(budgetRes.data.totalBudget);\n    } catch (error) {\n      setErrorMessage(\"Erreur lors du chargement des données.\");\n      console.error(error);\n    }\n  };\n\n  // Ajouter une transaction\n  const addTransaction = async transaction => {\n    if (!transaction.amount || transaction.amount <= 0) {\n      setErrorMessage(\"Montant invalide.\");\n      return;\n    }\n    try {\n      const res = await axios.post(\"/api/transactions\", transaction);\n      setTransactions([...transactions, res.data]);\n      setSuccessMessage(\"Transaction ajoutée !\");\n    } catch (error) {\n      setErrorMessage(\"Impossible d'ajouter la transaction.\");\n      console.error(error);\n    }\n  };\n\n  // Supprimer une transaction\n  const deleteTransaction = async id => {\n    try {\n      await axios.delete(`/api/transactions/${id}`);\n      setTransactions(transactions.filter(t => t.id !== id));\n      setSuccessMessage(\"Transaction supprimée !\");\n    } catch (error) {\n      setErrorMessage(\"Impossible de supprimer la transaction.\");\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      transactions,\n      categories,\n      budget,\n      errorMessage,\n      successMessage,\n      setErrorMessage,\n      setSuccessMessage,\n      addTransaction,\n      deleteTransaction,\n      fetchData\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s2(AppProvider, \"rL+WN2mb2rEWtYi9gS6uD49jo54=\");\n_c = AppProvider;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsxDEV","_jsxDEV","AppContext","AppProvider","children","_s2","_s","$RefreshSig$","transactions","setTransactions","categories","setCategories","budget","setBudget","errorMessage","setErrorMessage","successMessage","setSuccessMessage","token","localStorage","getItem","fetch","method","headers","then","res","json","data","sanitized","map","t","Array","isArray","setTrans","catch","err","console","error","fetchData","transResa","get","catRes","budgetRes","transRes","totalBudget","addTransaction","transaction","amount","post","deleteTransaction","id","delete","filter","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/Charging/_final_test/Finans_PAMW/frontend/src/context/AppContext.js"],"sourcesContent":["// src/context/AppContext.js\nimport React, { createContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nexport const AppContext = createContext();\n\nexport const AppProvider = ({ children }) => {\n  const [transactions, setTransactions] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [budget, setBudget] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  // Charger les données au démarrage\n  useEffect(() => {\n      const token = localStorage.getItem(\"token\");\n\n  // Charger les transactions\n  useEffect(() => {\n    fetch(\"http://localhost:5000/transactions/\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        const sanitized = (data.transactions || []).map((t) => ({\n          ...t,\n          categories: Array.isArray(t.categories) ? t.categories : [],\n        }));\n        setTrans(sanitized);\n      })\n      .catch((err) => console.error(\"Erreur lors du chargement des transactions :\", err));\n  }, [token]);\n  }, []);\n\n  \n  \n  const fetchData = async () => {\n    try {\n      const transResa = await axios.get(\"http://127.0.0.1:5000/transactions\");\n      const catRes = await axios.get(\"http://127.0.0.1:5000/categories\");\n      const budgetRes = await axios.get(\"http://127.0.0.1:5000/budget\");\n\n      setTransactions(transRes.data);\n      setCategories(catRes.data);\n      setBudget(budgetRes.data.totalBudget);\n    } catch (error) {\n      setErrorMessage(\"Erreur lors du chargement des données.\");\n      console.error(error);\n    }\n  };\n\n  // Ajouter une transaction\n  const addTransaction = async (transaction) => {\n    if (!transaction.amount || transaction.amount <= 0) {\n      setErrorMessage(\"Montant invalide.\");\n      return;\n    }\n\n    try {\n      const res = await axios.post(\"/api/transactions\", transaction);\n      setTransactions([...transactions, res.data]);\n      setSuccessMessage(\"Transaction ajoutée !\");\n    } catch (error) {\n      setErrorMessage(\"Impossible d'ajouter la transaction.\");\n      console.error(error);\n    }\n  };\n\n  // Supprimer une transaction\n  const deleteTransaction = async (id) => {\n    try {\n      await axios.delete(`/api/transactions/${id}`);\n      setTransactions(transactions.filter((t) => t.id !== id));\n      setSuccessMessage(\"Transaction supprimée !\");\n    } catch (error) {\n      setErrorMessage(\"Impossible de supprimer la transaction.\");\n      console.error(error);\n    }\n  };\n\n  return (\n    <AppContext.Provider\n      value={{\n        transactions,\n        categories,\n        budget,\n        errorMessage,\n        successMessage,\n        setErrorMessage,\n        setSuccessMessage,\n        addTransaction,\n        deleteTransaction,\n        fetchData,\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  );\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}